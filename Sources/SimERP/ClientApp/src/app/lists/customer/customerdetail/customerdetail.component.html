<section class="form_content">
    <form>
        <div class="row">
            <div class="col-sm-4 text-left">
                <p class="text-uppercase" style="font-size:18px;color: #587792; font-weight:bold; font-family: 'Lato', sans-serif;"><span>Thêm mới/Edit khách hàng</span></p>
            </div>
            <div class="col-sm-8 text-right">
                <div class="form-group" [ngClass]="{'wrapper': checkValidateAction()}">
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateAction()}" (click)="SaveData(true)" class="btn btn-success btn-sm" style="background-color: #5cb85c; border-color: #4cae4c">
                        <i class="far fa-save"></i> Lưu & Đóng
                    </button>&nbsp;
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateAction()}" (click)="SaveData(false)" class="btn btn-success btn-sm" style="background-color: #5cb85c; border-color: #4cae4c">
                        <i class="far fa-check-square"></i> Lưu & Thêm mới
                    </button>&nbsp;
                    <button type="button" (click)="goBack()" #closePageDetail class="btn btn-success btn-sm" style="background-color: #337ab7; border-color: #2e6da4;">
                        <i class="fas fa-long-arrow-alt-left"></i> Trở về
                    </button>&nbsp;
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div style="border-top:0.5px solid #d6d6d6; margin:3px 0"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-horizontal">
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Tên khách hàng<span class="control-label-require">*</span></label>
                        <div class="col-sm-7">
                            <input type="text" [(ngModel)]="objData.CustomerName" name="CustomerName" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Địa chỉ<span class="control-label-require">*</span></label>
                        <div class="col-sm-7">
                            <textarea type="text" [(ngModel)]="objData.Address" name="Address" rows="2" class="form-control-plaintext" style="border-bottom: 1px solid #ced4da;"></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Nhóm khách hàng<span class="control-label-require"></span></label>
                        <div class="col-sm-7">
                            <select [(ngModel)]="objData.CustomerTypeId" name="CustomerTypeId" class="browser-default form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">                                  
                                    <option *ngFor="let item of cboCustomerType" value="{{item.CustomerTypeId}}">
                                            {{item.CustomerTypeName}}
                                    </option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 text-right"><label></label></div>
                        <div class="col-sm-7">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="custom-control custom-checkbox mb-3" style="padding-top: 8px;">
                                        <input type="checkbox" [(ngModel)]="objData.IsGroupCompany" name="IsGroupCompany" id="IsGroupCompany" class="custom-control-input">
                                        <label class="custom-control-label" for="IsGroupCompany">Tổng công ty</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="objData.IsGroupCompany" class="row">
                        <label class="col-sm-3 control-label text-right">Tên tổng công ty<span class="control-label-require"></span></label>
                        <div class="col-sm-7">
                            <select [(ngModel)]="objData.GroupCompanyId" name="GroupCompanyId" class="browser-default form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                    <option *ngFor="let item of cboGroupCompany" value="{{item.GroupCompanyId}}">
                                            {{item.GroupCompanyName}}
                                    </option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-horizontal">
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Mã khách hàng<span class="control-label-require">*</span></label>
                        <div class="col-sm-7">
                            <input type="text" [(ngModel)]="objData.CustomerCode" name="CustomerCode" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Điện thoại<span class="control-label-require">*</span></label>
                        <div class="col-sm-7">
                            <input type="text" [(ngModel)]="objData.PhoneNumber" name="PhoneNumber" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Fax<span class="control-label-require"></span></label>
                        <div class="col-sm-7">
                            <input type="text" [(ngModel)]="objData.FaxNumber" name="FaxNumber" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-sm-3 control-label text-right">Email<span class="control-label-require"></span></label>
                        <div class="col-sm-7">
                            <input type="text" [(ngModel)]="objData.Email" name="Email" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 text-right"><label></label></div>
                        <div class="col-sm-7">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="custom-control custom-checkbox mb-3" style="padding-top: 8px;">
                                        <input type="checkbox" [(ngModel)]="objData.IsActive" name="IsActive" id="IsActive" class="custom-control-input">
                                        <label class="custom-control-label" for="IsActive">Sử dụng</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 text-left">
                <div class="mt-3">
                    <br>
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#info">THÔNG TIN KHÁCH HÀNG</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#items">HÀNG HÓA(s)</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#saler">SALER(s)</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#poundage">HOA HỒNG(s)</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#ship">GIAO HÀNG(s)</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#document">TÀI LIỆU(s)</a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div id="info" class="tab-pane active"><br>
                            <div class="row" style="padding-bottom: 10px;">
                                <div class="col-md-6">
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Mã số thuế<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.TaxNumber" name="TaxNumber" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Tên công ty xuất hóa đơn<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.CompanyName" name="CompanyName" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Địa chỉ xuất hóa đơn<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.CompanyAddress" name="CompanyAddress" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">TK ngân hàng<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.BankingNumber" name="BankingNumber" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Ngân hàng<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.BankingName" name="BankingName" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Ghi chú<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <textarea type="text" [(ngModel)]="objData.Notes" name="Notes" class="form-control-plaintext" rows="2" style="border-bottom: 1px solid #ced4da;"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Hạn thanh toán<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <select [(ngModel)]="objData.PaymentTermId" name="PaymentTermId" class="browser-default form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                                    <option value="10">10 Ngày</option>
                                                    <option value="15">15 Ngày</option>
                                                    <option value="20">20 Ngày</option>
                                                    <option value="50">50 Ngày</option>
                                                    <option value="100">100 Ngày</option>
                                                    <option value="200">200 Ngày</option>
                                                    <option value="300">300 Ngày</option>
                                                    <option value="500">500 Ngày</option>
                                                </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Hạn mức nợ<span class="control-label-require">*</span></label>
                                        <div class="col-sm-7">
                                            <input type="number" [(ngModel)]="objData.DebtCeiling" name="DebtCeiling" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Người đại diện<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.RepresentativeName" name="RepresentativeName" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">ĐT người ĐD<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.RepresentativePhone" name="RepresentativePhone" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Email người ĐD<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <input type="text" [(ngModel)]="objData.RepresentativeEmail" name="RepresentativeEmail" class="form-control " style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3 control-label text-right">Địa chỉ người ĐD<span class="control-label-require"></span></label>
                                        <div class="col-sm-7">
                                            <textarea type="text" [(ngModel)]="objData.RepresentativeAddress" name="RepresentativeAddress" class="form-control-plaintext" rows="2" style="border-bottom: 1px solid #ced4da;"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="items" class="tab-pane"><br>
                            <div class="row" style="margin-right: 0px; margin-left: 0px;">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row">
                                                <label class="col-sm-4 control-label text-right">Ngành hàng<span class="control-label-require"></span></label>
                                                <div class="col-sm-8">
                                                    <select [(ngModel)]="dataProductCategoryFilter" name="dataProductCategoryFilter" (change)="FilterCustomerProduct()" class="browser-default form-control" style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                                        <option value="-1">Tất cả</option>
                                                        <option *ngFor="let item of cboProductCategory" value="{{item.ProductCategoryId}}">
                                                            {{item.ProductCategoryName}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row">
                                                <label class="col-sm-4 control-label text-right">Trạng thái<span class="control-label-require"></span></label>
                                                <div class="col-sm-8">
                                                    <select [(ngModel)]="dataProductIsActiveFilter" name="dataProductIsActiveFilter" (change)="FilterCustomerProduct()" class="browser-default form-control" style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                                        <option value="-1">Tất cả</option>
                                                        <option value="1">Đang cung cấp</option>
                                                        <option value="0">Ngừng cung cấp</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-right: 0px; margin-left: 0px; padding-top: 8px;">
                                <div class="col-md-12">
                                    <div class="table-responsive">
                                        <!-- Table  -->
                                        <table class="table table-bordered table-striped table-hover">
                                            <!-- Table head -->
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Mã HH</th>
                                                    <th>Tên Hàng Hóa</th>
                                                    <th>ĐVT</th>
                                                    <th>Ngành Hàng</th>
                                                    <th>Nhân Viên Sale</th>
                                                    <th>Giá TK</th>
                                                    <th>Trạng Thái</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <!-- Table head -->
                                            <!-- Table body -->
                                            <tbody>
                                                <tr *ngIf="lstObjProduct.length <= 0">
                                                    <td colspan="14" class="datarow-null">Dữ liệu không tồn tại</td>
                                                </tr>
                                                <tr *ngFor="let row of lstObjProduct; let i = index">
                                                    <td class="order-number">{{i + 1}}</td>
                                                    <td class="col-name"><a style="cursor: pointer; color: #337ab7">{{row.ProductCode}}</a></td>
                                                    <td class="col-name">{{row.ProductName}}</td>
                                                    <td class="col-active">{{row.UnitName}}</td>
                                                    <td class="col-name">{{row.ProductCategoryName}}</td>
                                                    <td class="col-name">{{row.SaleName}}</td>
                                                    <td class="col-active text-right">{{row.Price}}</td>
                                                    <td>
                                                        <i [ngClass]="{'fas fa-check-square':row.IsActive, 'far fa-square': !row.IsActive}" [ngStyle]="{'color': '#337ab7'}"></i>
                                                    </td>
                                                    <td class="col-action">
                                                        <a (click)="ProductRemoveItem(row.ProductId)"><i class="far fa-trash-alt" style='color:#337ab7;'></i></a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="14" class="text-left lbadd"><a data-toggle="modal" data-target="#ProductModel" (click)="AddModelProduct()"><i class="fas fa-plus-circle"></i>Thêm hàng hóa</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="saler" class="tab-pane fade"><br>
                            <div class="row" style="margin-right: 0px; margin-left: 0px;">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row">
                                                <label class="col-sm-4 control-label text-right">Trạng thái<span class="control-label-require"></span></label>
                                                <div class="col-sm-8">
                                                    <select [(ngModel)]="dataSalerIsActiveFilter" name="dataSalerIsActiveFilter" (change)="FilterCustomerSaler()" class="browser-default form-control" style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                                        <option value="-1">Tất cả</option>
                                                        <option value="1">Đang quản lý</option>
                                                        <option value="0">Ngưng quản lý</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-right: 0px; margin-left: 0px; padding-top: 8px;">
                                <div class="col-md-12">
                                    <div class="table-responsive">
                                        <!-- Table  -->
                                        <table class="table table-bordered table-striped table-hover">
                                            <!-- Table head -->
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Mã NV</th>
                                                    <th>Tên Nhân Viên Sale</th>
                                                    <th>Ngày Tạo</th>
                                                    <th>Từ Ngày</th>
                                                    <th>Đến Ngày</th>
                                                    <th>Trạng Thái</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <!-- Table head -->
                                            <!-- Table body -->
                                            <tbody>
                                                <tr *ngIf="lstObjSaler.length <= 0">
                                                    <td colspan="8" class="datarow-null">Dữ liệu không tồn tại</td>
                                                </tr>
                                                <tr *ngFor="let row of lstObjSaler; let i = index">
                                                    <td class="order-number">{{i + 1}}</td>
                                                    <td class="col-name"><a (click)="EditModelSaler(i)" data-toggle="modal" data-target="#SalertModel" style="cursor: pointer; color: #337ab7">{{row.UserCode}}</a></td>
                                                    <td class="col-name">{{row.FullName}}</td>
                                                    <td>{{row.CreatedDate | date:"dd/MM/yyyy"}}</td>
                                                    <td>{{row.FromDate | date : "dd/MM/yyyy"}}</td>
                                                    <td>{{row.ToDate | date : "dd/MM/yyyy"}}</td>
                                                    <td class="col-active">
                                                        <i [ngClass]="{'fas fa-check-square':row.IsActive, 'far fa-square': !row.IsActive}" [ngStyle]="{'color': '#337ab7'}"></i>
                                                    </td>
                                                    <td class="col-action">
                                                        <a (click)="EditModelSaler(i)" data-toggle="modal" data-target="#SalertModel"><i class="fas fa-edit" style='color:#337ab7;'></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="poundage" class="tab-pane"><br>
                            <div class="row" style="margin-right: 0px; margin-left: 0px;">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row">
                                                <label class="col-sm-4 control-label text-right">Trạng thái<span class="control-label-require"></span></label>
                                                <div class="col-sm-8">
                                                    <select [(ngModel)]="dataCommissionIsActiveFilter" name="dataCommissionIsActiveFilter" class="browser-default form-control" (change)="FilterCustomerCommission()" style="box-shadow: none; border-top: none; border-left: none; border-right: none">
                                                        <option value="-1">Tất cả</option>
                                                        <option value="1">Sử dụng</option>
                                                        <option value="0">Ngưng</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-right: 0px; margin-left: 0px; padding-top: 8px;">
                                <div class="col-md-12">
                                    <div class="table-responsive">
                                        <!-- Table  -->
                                        <table class="table table-bordered table-striped table-hover">
                                            <!-- Table head -->
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Người Hưởng Hoa Hồng</th>
                                                    <th>Ghi Chú</th>
                                                    <th>Điện Thoại</th>
                                                    <th>Tài Khoản</th>
                                                    <th>Ngân Hàng</th>
                                                    <th>Ngày Tạo</th>
                                                    <th>Trạng Thái</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <!-- Table head -->
                                            <!-- Table body -->
                                            <tbody>
                                                <tr *ngIf="lstObjCommission.length <= 0">
                                                    <td colspan="9" class="datarow-null">Dữ liệu không tồn tại</td>
                                                </tr>
                                                <tr *ngFor="let row of lstObjCommission; let i = index">
                                                    <td class="order-number">{{i + 1}}</td>
                                                    <td class="col-name"><a style="cursor: pointer; color: #337ab7">{{row.BeneficiaryName}}</a></td>
                                                    <td class="col-note">{{row.Notes}}</td>
                                                    <td class="col-name">{{row.PhoneNumber}}</td>
                                                    <td class="col-name">{{row.BankAccount}}</td>
                                                    <td class="col-name">{{row.BankName}}</td>
                                                    <td class="col-name">{{row.CreatedDate | date : "dd/MM/yyyy"}}</td>
                                                    <td class="col-active">
                                                        <i [ngClass]="{'fas fa-check-square':row.IsActive, 'far fa-square': !row.IsActive}" [ngStyle]="{'color': '#337ab7'}"></i>
                                                    </td>
                                                    <td class="col-action">
                                                        <a (click)="EditModelCommission(row.PhoneNumber)" data-toggle="modal" data-target="#CommissionModel"><i class="fas fa-edit" style='color:#337ab7;'></i></a>&nbsp;&nbsp;
                                                        <a (click)="CommissionRemoveItem(row.PhoneNumber)"><i class="far fa-trash-alt" style='color:#337ab7;'></i></a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="14" class="text-left lbadd"><a (click)="AddModelCommission()" data-toggle="modal" data-target="#CommissionModel"><i class="fas fa-plus-circle"></i>Thêm hoa hồng</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ship" class="tab-pane"><br>
                            <div class="row" style="margin-right: 0px; margin-left: 0px; padding-top: 8px;">
                                <div class="col-md-12">
                                    <div class="table-responsive">
                                        <!-- Table  -->
                                        <table class="table table-bordered table-striped table-hover">
                                            <!-- Table head -->
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Nơi Giao Hàng</th>
                                                    <th>Địa Chỉ</th>
                                                    <th>Ngày Tạo</th>
                                                    <th>Trạng Thái</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <!-- Table head -->
                                            <!-- Table body -->
                                            <tbody>
                                                <tr *ngIf="objData.objDelivery.length <= 0">
                                                    <td colspan="6" class="datarow-null">Dữ liệu không tồn tại</td>
                                                </tr>
                                                <tr *ngFor="let row of objData.objDelivery; let i = index">
                                                    <td class="order-number">{{i + 1}}</td>
                                                    <td class="col-name"><a (click)="EditModelDelivery(i)" data-toggle="modal" data-target="#DeliveryModel" style="cursor: pointer; color: #337ab7">{{row.DeliveryPlace}}</a></td>
                                                    <td class="col-note">{{row.DeliveryAddress}}</td>
                                                    <td>{{row.CreatedDate | date : "dd/MM/yyyy"}}</td>
                                                    <td class="col-active">
                                                        <i [ngClass]="{'fas fa-check-square':row.IsActive, 'far fa-square': !row.IsActive}" [ngStyle]="{'color': '#337ab7'}"></i>
                                                    </td>
                                                    <td class="col-action">
                                                        <a (click)="EditModelDelivery(i)" data-toggle="modal" data-target="#DeliveryModel"><i class="fas fa-edit" style='color:#337ab7;'></i></a>&nbsp;&nbsp;
                                                        <a (click)="DeliveryRemoveItem(i)"><i class="far fa-trash-alt" style='color:#337ab7;'></i></a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="14" class="text-left lbadd"><a (click)="AddModelDelivery()" data-toggle="modal" data-target="#DeliveryModel"><i class="fas fa-plus-circle"></i>Thêm thông tin giao hàng</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="document" class="tab-pane"><br>
                            <div class="row" style="margin-right: 0px; margin-left: 0px; padding-top: 8px;">
                                <div style="display: none">
                                    <input type="file" #file placeholder="Choose file" (change)="changeFile(file.files)" multiple style="display:none;">
                                </div>
                                <div class="col-md-12">
                                    <div class="table-responsive">

                                        <!-- Table  -->
                                        <table class="table table-bordered table-striped table-hover table-fixed">

                                            <!-- Table head -->
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Image</th>
                                                    <th>Tên hình ảnh/Tài liệu</th>
                                                    <th>Ghi chú</th>
                                                    <th>File Name</th>
                                                    <th>Ngày update</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <!-- Table head -->

                                            <!-- Table body -->
                                            <tbody>
                                                <tr *ngIf="objData.ListAttachFile.length < 1">
                                                    <td colspan="10" class="datarow-null">Dữ liệu không tồn tại</td>
                                                </tr>
                                                <tr *ngFor="let row of objData.ListAttachFile; let i = index">
                                                    <td class="order-number">{{i + 1}}</td>
                                                    <td><img [src]="row.FilePathPreview" height="30px"></td>
                                                    <td class="col-name"><input type="text" [(ngModel)]="objData.ListAttachFile[i].FileTitle" name="FileTitle{{i}}" class="form-control " maxlength="250"></td>
                                                    <td class="col-name"><input type="text" [(ngModel)]="objData.ListAttachFile[i].Desctiption" name="Desctiption{{i}}" class="form-control " maxlength="500"></td>
                                                    <td style="text-align: left; text-overflow: ellipsis" class="col-name"><a href="javascript:void(0)" (click)="openAttachFile(row)">{{row.FileNameOriginal}}</a>
                                                    </td>
                                                    <td class="col-code">{{row["CreatedDate"] | date : "dd/MM/yyyy"}}</td>
                                                    <td class="col-action">
                                                        <a (click)="setCurrentAttachFileIndex(i) && file.click()"><i class="fas fa-edit" style="color:#337ab7"></i></a>&nbsp;&nbsp;&nbsp;
                                                        <a (click)="deleteAttachFile(i)"><i class="far fa-trash-alt" style="color:#337ab7"></i></a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="14" class="text-left lbadd"><a (click)="file.click()"><i class="fas fa-plus-circle"></i>Upload tài liệu/Hình ảnh</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- The Modal Hàng Hóa -->
    <div class="modal fade" id="ProductModel" data-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Chọn Hàng Hóa</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form_content">
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Mã hàng hóa</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" class="form-control form-control-sm" [(ngModel)]='dataSerachProduct' (keydown)="product_onKeydown($event)" select-value-of="ProductCode" ngui-auto-complete [source]="this.lstProduct" [accept-user-input]="true" [list-formatter]="product_renderDataRowAutoComplete"
                                    placeholder="Mã/tên hàng hóa " display-property-name="ProductName" (valueChanged)="product_autocompleteCallback($event)" [header-item-template]="product_autocompleteHeaderTemplate" no-match-found-text='Không có dữ liệu'
                                    value-property-name="ProductCode" max-num-list='10' tab-to-select='true'>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Tên hàng hóa</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelProduct.ProductName" disabled class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Đơn vị tính</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelProduct.UnitName" disabled class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Ngành hàng</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelProduct.ProductCategoryName" disabled class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Nhóm hàng</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <select [(ngModel)]="objModelProduct.ProductType" name="ItemType" disabled class="browser-default form-control">
                                    <option value=-1>--Chọn loại hàng hoá--</option>
                                    <option *ngFor="let item of lstItemType" value="{{item.ItemTypeId}}">
                                      {{item.ItemTypeName}}
                                    </option>
                                  </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Mã nhân viên sale</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" class="form-control form-control-sm" [(ngModel)]='dataSerachEmployee' (keydown)="employee_onKeydown($event)" select-value-of="UserCode" ngui-auto-complete [source]="this.lstUser" [accept-user-input]="true" [list-formatter]="employee_renderDataRowAutoComplete"
                                    placeholder="Mã/tên nhân viên" display-property-name="UserName" (valueChanged)="employee_autocompleteCallback($event)" [header-item-template]="employee_autocompleteHeaderTemplate" no-match-found-text='Không có dữ liệu'
                                    value-property-name="UserCode" max-num-list='5' tab-to-select='true'>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Tên nhân viên sale</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelProduct.SaleName" disabled class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label></label></div>
                            <div class="col-sm-9">
                                <div class="custom-control custom-checkbox mb-3">
                                    <input type="checkbox" class="custom-control-input" [(ngModel)]="objModelProduct.IsSale" id="IsSale" name="IsSale">
                                    <label class="custom-control-label" for="IsSale">Đang sale mặt hàng này</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer" [ngClass]="{'wrapper': checkValidateModelProduct()}">
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateModelProduct()}" class="btn btn-info btn-sm" (click)="saveDataModelProduct(true)">
                                <i class="far fa-save"></i> Lưu(F3)
                              </button>&nbsp;
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateModelProduct()}" class="btn btn-info btn-sm" (click)="saveDataModelProduct(false)"> 
                                <i class="far fa-save"></i> Lưu & Thêm mới
                              </button>&nbsp;
                    <button type="button" class="btn btn-outline-secondary btn-sm" data-dismiss="modal" #closeAddExpenseModal (click)="CloseProductModel()">Đóng</button>
                </div>

            </div>
        </div>
    </div>

    <!-- The Modal Saler -->
    <div class="modal fade" id="SalertModel" data-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Update Thông tin sale</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form_content">
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Ngày bắt đầu</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-7">
                                <div class="input-group ">
                                    <input class="form-control form-control-sm " [(ngModel)]="fromDate" placeholder="" name="FromDate" ngbDatepicker #FromDate="ngbDatepicker" style="box-shadow: none; border-top: none; border-left: none; border-right: none;">
                                    <div class="input-group-append">
                                        <button class="btn btn-sm btn-outline-secondary calendar " (click)="FromDate.toggle()" type="button">
                                    <i class="fa fa-calendar" aria-hidden="true"></i>
                                  </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3"></div>
                            <div class="col-sm-7">
                                <div class="custom-control custom-checkbox mb-3" style="padding-top: 8px;">
                                    <input type="checkbox" [(ngModel)]="IsToDate" name="IsToDate" id="IsToDate" class="custom-control-input">
                                    <label class="custom-control-label" for="IsToDate">Kết thúc sale</label>
                                </div>
                            </div>
                        </div>
                        <div class="row" *ngIf="IsToDate">
                            <div class="col-sm-3 text-right"><label control-label>Ngày kết thúc</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <input class="form-control form-control-sm" [(ngModel)]="toDate" placeholder="" name="ToDate" ngbDatepicker #ToDate="ngbDatepicker" style="box-shadow: none; border-top: none; border-left: none; border-right: none;">
                                    <div class="input-group-append">
                                        <button class="btn btn-sm btn-outline-secondary calendar" (click)="ToDate.toggle()" type="button">
                                    <i class="fa fa-calendar" aria-hidden="true"></i>
                                  </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-info btn-sm" (click)="saveDataModelSaler(true)">
                                <i class="far fa-save"></i> Lưu(F3)
                              </button>&nbsp;
                    <button type="button" class="btn btn-outline-secondary btn-sm" data-dismiss="modal" #closeAddExpenseModalSaler (click)="CloseSalerModel()">Đóng</button>
                </div>

            </div>
        </div>
    </div>
    <!-- The Modal Saler -->
    <div class="modal fade" id="CommissionModel" data-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Add/Edit Người nhận hoa hồng</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form_content">
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Ngày tạo</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <div class="input-group wrapper">
                                    <input class="form-control form-control-sm pointer-events-none" [(ngModel)]="dtcreate" placeholder="" disabled name="objModelCommission.CreatedDate" ngbDatepicker #CommissionDate="ngbDatepicker" style="box-shadow: none; border-top: none; border-left: none; border-right: none;">
                                    <div class="input-group-append">
                                        <button class="btn btn-sm btn-outline-secondary calendar pointer-events-none" (click)="CommissionDate.toggle()" type="button">
                                            <i class="fa fa-calendar" aria-hidden="true"></i>
                                          </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Người hưởng thụ</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" #BeneficiaryName='ngModel' [(ngModel)]="objModelCommission.BeneficiaryName" name="objModelCommission.BeneficiaryName" class="form-control form-control-sm" required [ngClass]="{'is-invalid': BeneficiaryName.touched  && BeneficiaryName.invalid}">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Điện thoại</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" #objModelCommission_PhoneNumber='ngModel' [(ngModel)]="objModelCommission.PhoneNumber" name="objModelCommission.PhoneNumber" class="form-control form-control-sm" required [ngClass]="{'is-invalid': objModelCommission_PhoneNumber.touched  && objModelCommission_PhoneNumber.invalid}">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Email</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelCommission.Email" name="objModelCommission.Email" class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Tài khoản</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelCommission.BankAccount" name="objModelCommission.BankAccount" class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Tại ngân hàng</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelCommission.BankName" name="objModelCommission.BankName" class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-3 control-label text-right">Ghi chú<span class="control-label-require"></span></label>
                            <div class="col-sm-9">
                                <textarea type="text" [(ngModel)]="objModelCommission.Notes" name="objModelCommission.Notes" rows="2" maxlength="2000" class="form-control-plaintext" style="border-bottom: 1px solid #ced4da;"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3"></div>
                            <div class="col-sm-9">
                                <div class="custom-control custom-checkbox mb-3" style="padding-top: 8px;">
                                    <input type="checkbox" [(ngModel)]="objModelCommission.IsActive" name="objModelCommission.IsActive" id="objModelCommission.IsActive" class="custom-control-input">
                                    <label class="custom-control-label" for="objModelCommission.IsActive">Đang nhận hoa hồng</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer" [ngClass]="{'wrapper': checkValidateModelCommission()}">
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateModelCommission()}" class="btn btn-info btn-sm" (click)="saveDataModelCommission(true)">
                                <i class="far fa-save"></i> Lưu(F3)
                              </button>&nbsp;
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateModelCommission()}" class="btn btn-info btn-sm" (click)="saveDataModelCommission(false)"> 
                                <i class="far fa-save"></i> Lưu & Thêm mới
                              </button>&nbsp;
                    <button type="button" class="btn btn-outline-secondary btn-sm" data-dismiss="modal" #closeAddExpenseModalCommission (click)="CloseCommissionModel()">Đóng</button>
                </div>
            </div>
        </div>
    </div>
    <!-- The Modal Delivery -->
    <div class="modal fade" id="DeliveryModel" data-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Add/Edit Địa chỉ giao hàng</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form_content">
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Ngày tạo</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <div class="input-group wrapper">
                                    <input class="form-control form-control-sm pointer-events-none" [(ngModel)]="dtcreate" placeholder="" disabled name="objModelDelivery.CreatedDate" ngbDatepicker #DeliveryDate="ngbDatepicker" style="box-shadow: none; border-top: none; border-left: none; border-right: none;">
                                    <div class="input-group-append">
                                        <button class="btn btn-sm btn-outline-secondary calendar pointer-events-none" (click)="DeliveryDate.toggle()" type="button">
                                            <i class="fa fa-calendar" aria-hidden="true"></i>
                                          </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Nơi giao hàng</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" #DeliveryPlace='ngModel' [(ngModel)]="objModelDelivery.DeliveryPlace" name="objModelDelivery.DeliveryPlace" class="form-control form-control-sm" required [ngClass]="{'is-invalid': DeliveryPlace.touched  && DeliveryPlace.invalid}">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Địa chỉ</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" #DeliveryAddress='ngModel' [(ngModel)]="objModelDelivery.DeliveryAddress" name="objModelDelivery.DeliveryAddress" class="form-control form-control-sm" required [ngClass]="{'is-invalid': DeliveryAddress.touched  && DeliveryAddress.invalid}">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Latitude</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelDelivery.Latitude" name="objModelDelivery.Latitude" class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3 text-right"><label control-label>Longitude</label> <label class="control-label-require"></label></div>
                            <div class="col-sm-9">
                                <input type="text" [(ngModel)]="objModelDelivery.Longitude" name="objModelDelivery.Longitude" class="form-control form-control-sm">
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-3 control-label text-right">Ghi chú<span class="control-label-require"></span></label>
                            <div class="col-sm-9">
                                <textarea type="text" [(ngModel)]="objModelDelivery.Notes" name="objModelDelivery.Notes" rows="2" maxlength="2000" class="form-control-plaintext" style="border-bottom: 1px solid #ced4da;"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3"></div>
                            <div class="col-sm-9">
                                <div class="custom-control custom-checkbox mb-3" style="padding-top: 8px;">
                                    <input type="checkbox" [(ngModel)]="objModelDelivery.IsActive" name="objModelDelivery.IsActive" id="objModelDelivery.IsActive" class="custom-control-input">
                                    <label class="custom-control-label" for="objModelDelivery.IsActive">Sử dụng</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer" [ngClass]="{'wrapper': checkValidateModelDelivery()}">
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateModelDelivery()}" class="btn btn-info btn-sm" (click)="saveDataModelDelivery(true)">
                                <i class="far fa-save"></i> Lưu(F3)
                              </button>&nbsp;
                    <button type="button" [ngClass]="{'pointer-events-none': checkValidateModelDelivery()}" class="btn btn-info btn-sm" (click)="saveDataModelDelivery(false)"> 
                                <i class="far fa-save"></i> Lưu & Thêm mới
                              </button>&nbsp;
                    <button type="button" class="btn btn-outline-secondary btn-sm" data-dismiss="modal" #closeAddExpenseModalDelivery (click)="CloseDeliveryModel()">Đóng</button>
                </div>
            </div>
        </div>
    </div>
</section>